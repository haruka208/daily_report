## ・取り組んだ課題一覧
- 現場で使えるDjangoの教科書

## ・わかったこと

### ミドルウェア（Middleware）
- Djangoの主要機能（モデル・テンプレート・ビュー）とURLディスパッチャの中間に位置し、ビューを出入りする全てのリクエストとレスポンスをフックすることができる
- 必要なものを`settings.py`に加えて簡単に利用できる、自作して追加もできる
- `MIDDLEWARE`に記載した順序通りに実行される（レスポンスフェーズでは逆順）、順序は重要
- 初期状態で設定されるミドルウェア
  - `SecurityMiddleware`
    - リクエストお呼びレスポンスへのセキュリティ強化
    - `HTTP`でアクセスした場合に`HTTPS`で始まるURLに自動的にリダイレクトするようにレスポンスを返す機能もある（デフォルトではオフ）
  - `SessionMiddleware`
    - セッションを有効化するためのミドルウェア
    - 有効化するには`INSTALLED_APPS` に`Django.contrib.sessions`を入れておく必要がある（デフォルトで入っている）
    - セッションの格納先をデフォルトのデータベースからキャッシュなどに変更することも可能
    - セッションが有効になっていないと利用できないミドルウェアのあるため迷ったら有効化しておく
   - `CommonMiddleware` 
      - ユーザーエージェントによるアクセス制限やURLリライティングなどの便利機能を提供
     - このミドルウェアの有効化は必須と考えていい
     - デフォルトでURL末尾に`/`を付与する機能が有効化される
     - URLの先頭に`www.`がない場合に`www.`で始まる同じURLにリダイレクトしてくれる機能のある（デフォルトではオフ）
  - `CsrfViewMiddleware`
    - CSRFトークンを検証するために必要なミドルウェア
  - `AuthenticationMiddleware`
    - リクエストのたびに、リクエストオブジェクトの`user`属性にユーザー情報をセットしてくれる
    - ログイン済みの場合はセッションに保管されている`User`モデルのインスタンスを、未ログインの場合は`AnonymousUser`という特別なクラスのオブジェクトをセットする
    - セッションを必要とするので、`SessionMiddleware`よりも後ろに記述する
  - `MessageMiddleware` 
    - 画面に一度だけ出力する用途で使う「フラッシュメッセージ」の機能を提供するためのミドルウェア
    - 「ログインしました」「商品を購入しました」などの通知
   - `XFrameOptionsMiddleware`
     - クリックジャッキング（ユーザーが意図しないクリックをさせられる攻撃）対策のためのミドルウェア
     - 自分と同じドメインからの`<iframe>`（インラインフレーム）埋め込みだけ許可される



## ・感じたこと
- 夜の飛行機で勉強しようと思ったが暗くて勉強できなかった・・
- 新幹線移動の方が勉強には断然いいなと感じた


## ・次やること
- 現場で使えるDjangoの教科書

## ・学習時間
- today:  1h
- total  : 712h


